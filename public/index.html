<!DOCTYPE html>
<html lang="EN">
    <head>
        <meta charset="UTF-8">
        <meta name="author" content="Pete Sattler">
        <meta name="description" content="NYU SPS INFO1-CE9755 Final Project">
        <meta name="email" content="peter@sattler22.net ">
        <title id="title">Pete's World Banking Empire: Home Page</title>
        <style>
            .header img {
                float: left;
                height: 15%;
                width: 15%;
            }
            .header h1 {
                line-height: 200px;
            }
            ul {
                list-style-type: none;
                text-align: left;
                text-justify: auto
                margin: 0;
                padding: 0;
            }
            li {
                line-height: 40px;
                display: inline;
            }
            table, th, td {
                border: 1px solid black;
            }
            th, td {
                padding: 15px;
            }
            th {
                text-align: left;
            }
            tr:nth-child(even) {
                background-color: #f2f2f2
            }
        </style>
    </head>
    <body>
        <div class="header">
            <img src="/images/money-stack.gif" alt="Stacks of $$$">
            <h1>Pete's World Banking Empire</h1>
        </div>
        <div class="navbar">
            <ul>
                <li><a href="addcust.html">Add Customer</a></li>
            </ul>
        </div>     
        <div id="customers"></div>
         <div>
             <p>Copyright&copy; 2019 Pete's World Banking Empire, L.L.C</p>
        </div> 
    </body>
    <script>
        var xhr = new XMLHttpRequest();
        xhr.open("GET", "http://localhost:8080/api/money-transfer/customers");
        xhr.onreadystatechange = function() {
            if(xhr.readyState === 4) {
                if(xhr.status === 200) {
                    var data = JSON.parse(xhr.responseText);
                    displayCustomers(data);
                }
                else {
                    alert("No customer data found!!!");
                }
            }
        };
        xhr.send();
        
        function displayCustomers(data) {
            var content = "<table>";
            for(var row = 0; row < data.length; row++) {
                if(row == 0) {
                    content += "<tr>";
                    content += "<th>Customer ID</th>";
                    content += "<th>First Name</th>";
                    content += "<th>Last Name</th>";
                    content += "<th>Gender</th>";
                    content += "<th>Phone</th>";
                    content += '<th colspan="4">Address</th>';
                    content += "</tr>";
                }
                content += "<tr>";
                content += "<td>" + data[row].id + "</td>";
                content += "<td>" + data[row].firstName + "</td>";
                content += "<td>" + data[row].lastName + "</td>";
                content += "<td>" + data[row].gender + "</td>";
                content += "<td>" + data[row].phone + "</td>";
                content += "<td>" + data[row].address.street + "</td>";
                content += "<td>" + data[row].address.city + "</td>";
                content += "<td>" + data[row].address.state + "</td>";
                content += "<td>" + data[row].address.zip + "</td>";
                content += "</tr>";
            }
            content += "</table>";
            document.getElementById("customers").innerHTML = content;
        }
    </script>
</html>
